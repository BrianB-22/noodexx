{{define "button"}}
{{- /* Button Component Template
    
    Props:
    - Variant: "primary", "secondary", "danger", "ghost" (defaults to "primary" if invalid)
    - Size: "sm", "md", "lg" (defaults to "md" if invalid)
    - Loading: boolean - displays spinner and disables button
    - Disabled: boolean - disables the button
    - Type: "button", "submit" (defaults to "button")
    - Class: string - additional CSS classes
    - Content: string/HTML - button content
    - ID: string - optional button ID
    - HxGet, HxPost, HxDelete, HxPut: string - HTMX attributes
    - HxTarget: string - HTMX target selector
    - HxSwap: string - HTMX swap strategy
    - OnClick: string - onclick handler
    - AriaLabel: string - accessibility label
*/ -}}

{{- /* Validate and default variant */ -}}
{{- $variant := .Variant | default "primary" -}}
{{- if not (or (eq $variant "primary") (eq $variant "secondary") (eq $variant "danger") (eq $variant "ghost")) -}}
    {{- $variant = "primary" -}}
{{- end -}}

{{- /* Validate and default size */ -}}
{{- $size := .Size | default "md" -}}
{{- if not (or (eq $size "sm") (eq $size "md") (eq $size "lg")) -}}
    {{- $size = "md" -}}
{{- end -}}

{{- /* Build base classes */ -}}
{{- $baseClasses := "inline-flex items-center justify-center font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex-nowrap" -}}

{{- /* Size-specific classes */ -}}
{{- $sizeClasses := "" -}}
{{- if eq $size "sm" -}}
    {{- $sizeClasses = "px-3 py-1.5 text-sm rounded-md" -}}
{{- else if eq $size "md" -}}
    {{- $sizeClasses = "px-4 py-2 text-base rounded-lg" -}}
{{- else if eq $size "lg" -}}
    {{- $sizeClasses = "px-6 py-3 text-lg rounded-lg" -}}
{{- end -}}

{{- /* Variant-specific classes */ -}}
{{- $variantClasses := "" -}}
{{- if eq $variant "primary" -}}
    {{- $variantClasses = "bg-primary-600 text-white hover:bg-primary-700 active:bg-primary-800 focus:ring-primary-500 dark:bg-primary-600 dark:hover:bg-primary-700 dark:active:bg-primary-800" -}}
{{- else if eq $variant "secondary" -}}
    {{- $variantClasses = "bg-surface-200 text-surface-900 hover:bg-surface-300 active:bg-surface-400 focus:ring-surface-500 dark:bg-surface-700 dark:text-surface-100 dark:hover:bg-surface-600 dark:active:bg-surface-500" -}}
{{- else if eq $variant "danger" -}}
    {{- $variantClasses = "bg-error-600 text-white hover:bg-error-700 active:bg-error-800 focus:ring-error-500 dark:bg-error-500 dark:hover:bg-error-600 dark:active:bg-error-700" -}}
{{- else if eq $variant "ghost" -}}
    {{- $variantClasses = "bg-transparent text-surface-700 hover:bg-surface-100 active:bg-surface-200 focus:ring-surface-500 dark:text-surface-300 dark:hover:bg-surface-800 dark:active:bg-surface-700" -}}
{{- end -}}

{{- /* Combine all classes */ -}}
{{- $allClasses := printf "%s %s %s" $baseClasses $sizeClasses $variantClasses -}}
{{- if .Class -}}
    {{- $allClasses = printf "%s %s" $allClasses .Class -}}
{{- end -}}

{{- /* Button type */ -}}
{{- $type := .Type | default "button" -}}

<button 
    type="{{$type}}"
    class="{{$allClasses}}"
    {{if or .Loading .Disabled}}disabled{{end}}
    {{if .ID}}id="{{.ID}}"{{end}}
    {{if .HxGet}}hx-get="{{.HxGet}}"{{end}}
    {{if .HxPost}}hx-post="{{.HxPost}}"{{end}}
    {{if .HxDelete}}hx-delete="{{.HxDelete}}"{{end}}
    {{if .HxPut}}hx-put="{{.HxPut}}"{{end}}
    {{if .HxTarget}}hx-target="{{.HxTarget}}"{{end}}
    {{if .HxSwap}}hx-swap="{{.HxSwap}}"{{end}}
    {{if .OnClick}}onclick="{{.OnClick}}"{{end}}
    {{if .AriaLabel}}aria-label="{{.AriaLabel}}"{{end}}
>
    {{if .Loading}}
    <svg class="animate-spin -ml-1 mr-2 h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
    {{end}}
    {{.Content | html}}
</button>
{{end}}
